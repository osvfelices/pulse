<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Getting Started Guide - Pulse Language</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
</head>
<body>
  <nav class="top-nav">
    <div class="top-nav-container">
      <div class="top-nav-left">
        <a href="index.html" class="top-nav-logo">
          <img src="./pulse.svg" alt="Pulse Logo" class="top-nav-logo-img">
          <span class="top-nav-logo-text">Pulse</span>
        </a>
        <div class="top-nav-links">
          <a href="index.html" class="top-nav-link">Docs</a>
          <a href="playground.html" class="top-nav-link">Playground</a>
          <a href="https://github.com/osvfelices/pulse" class="top-nav-link" target="_blank">GitHub</a>
        </div>
      </div>
      <div class="top-nav-right">
        <a href="https://www.npmjs.com/package/pulselang" class="top-nav-button" target="_blank">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download
        </a>
      </div>
    </div>
  </nav>

  <div class="docs-container">
    <aside class="sidebar-left">
      <nav class="sidebar-nav">
        <div class="nav-group">
          <div class="nav-group-title">Getting Started</div>
          <a href="index.html" class="nav-item">Overview</a>
          <a href="guide.html" class="nav-item">Installation</a>
        </div>
        <div class="nav-group">
          <div class="nav-group-title">Documentation</div>
          <a href="api.html" class="nav-item">API Reference</a>
          <a href="playground.html" class="nav-item">Playground</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <article class="article">
        <h1>Getting Started Guide</h1>

<p>Learn the fundamentals of Pulse programming in this guide.</p>

<h2>Quickstart (1.0.4)</h2>

<h3>Installation</h3>

<pre><code class="language-bash">npm install pulselang
</code></pre>

<h3>Running a single .pulse file</h3>

<p>Create a file called <code>hello.pulse</code>:</p>

<pre><code class="language-javascript">fn add(a, b) {
  return a + b
}

print(add(2, 3))
</code></pre>

<strong>Run it:</strong>

<pre><code class="language-bash">pulse hello.pulse
</code></pre>

<p>Expected output:</p>
<pre><code>5
</code></pre>

<p>Or compile to JavaScript first:</p>

<pre><code class="language-bash">node node_modules/pulselang/tools/build/build.mjs --src . --out ./dist
node dist/hello.mjs
</code></pre>

<p>From the repo:</p>

<pre><code class="language-bash">pulse hello.pulse
# or: node lib/run.js hello.pulse
</code></pre>

<h3>Compilation</h3>

<p>Source → AST → JS (ESM).</p>

<p>Two modes:</p>
<ul>
<li><code>lib/run.js</code> compiles and runs immediately (temporary .mjs file)</li>
<li><code>tools/build/build.mjs</code> generates permanent .mjs files you can deploy</li>
</ul>

<h2>Basic Syntax</h2>

<h3>Variables and Constants</h3>

<pre><code class="language-javascript">const PI = 3.14159
let counter = 0
var oldStyle = 'avoid using var'
</code></pre>

<h3>Functions</h3>

<pre><code class="language-javascript">fn add(a, b) {
  return a + b
}

const multiply = (x, y) =&gt; x * y

async fn fetchData(url) {
  const response = await fetch(url)
  return response.json()
}
</code></pre>

<h3>Classes</h3>

<pre><code class="language-javascript">class Rectangle {
  constructor(width, height) {
    this.width = width
    this.height = height
  }

  area() {
    return this.width * this.height
  }

  static fromSquare(size) {
    return new Rectangle(size, size)
  }
}

const rect = new Rectangle(10, 20)
print(rect.area())
</code></pre>

<h2>Working with Files</h2>

<p>Pulse provides a file system API in the <code>std/fs</code> module:</p>

<pre><code class="language-javascript">import fs from 'std/fs'

async fn main() {
  const content = await fs.readText('./data.txt')
  print(content)

  await fs.writeText('./output.txt', 'Hello World')

  const data = await fs.readJson('./config.json')
  print('Version:', data.version)

  const files = await fs.readDir('./')
  for (const file of files) {
    print(file)
  }
}

await main()
</code></pre>

<h2>Reactivity</h2>

<p>Pulse includes a reactive system inspired by modern frameworks:</p>

<pre><code class="language-javascript">import { signal, effect, computed, batch } from 'pulselang/runtime'

const [count, setCount] = signal(0)
const [name, setName] = signal('Alice')

const message = computed(() =&gt; {
  return `${name()} has ${count()} items`
})

effect(() =&gt; {
  print(message())
})

setCount(5)
setName('Bob')

batch(() =&gt; {
  setCount(10)
  setName('Charlie')
})
</code></pre>

<p>Expected output:</p>
<pre><code>Alice has 0 items
Alice has 5 items
Bob has 5 items
Charlie has 10 items
</code></pre>

<h2>Concurrency Intro</h2>

<p>Channels are how tasks communicate. A channel is a pipe. One task writes, another reads.</p>

<code>await ch.send(value)</code> blocks your task until someone does <code>await ch.recv()</code>. This is how determinism works - the scheduler knows exactly when each task is waiting and when to wake it up.

<p>Example:</p>

<pre><code class="language-javascript">import { DeterministicScheduler, channel } from 'pulselang/runtime'

const scheduler = new DeterministicScheduler()
const ch = channel()

async fn producer() {
  for (let i = 0; i &lt; 3; i++) {
    await ch.send(i)
    print('Sent:', i)
  }
  ch.close()
}

async fn consumer() {
  for await (const value of ch) {
    print('Received:', value)
  }
  print('Channel closed')
}

scheduler.spawn(producer)
scheduler.spawn(consumer)
await scheduler.run()
</code></pre>

<p>Expected output:</p>
<pre><code>Sent: 0
Received: 0
Sent: 1
Received: 1
Sent: 2
Received: 2
Channel closed
</code></pre>

<p>What happens:</p>
<ul>
<li>Producer sends 0, blocks</li>
<li>Consumer receives 0, prints it, goes back to waiting</li>
<li>Producer wakes up, sends 1, blocks again</li>
<li>This ping-pongs until producer closes the channel</li>
<li>Consumer's <code>for await</code> sees the close and exits</li>
</ul>

<p>Run this 100 times, you get the exact same output every time.</p>

<h3>Buffered Channels</h3>

<p>Unbuffered = handshake (both sides wait). Buffered = mailbox (you can drop stuff off and leave).</p>

<pre><code class="language-javascript">import { channel } from 'pulselang/runtime'

const buffered = channel(10)

async fn producer() {
  for (let i = 0; i &lt; 12; i++) {
    await buffered.send(i)
    print('Sent:', i)
  }
}
</code></pre>

<p>Expected output (first 10 sends don't block):</p>
<pre><code>Sent: 0
Sent: 1
...
Sent: 9
(blocks on 11th send until someone reads)
</code></pre>

<p>Useful when producer and consumer run at different speeds.</p>

<h3>Select Operations</h3>

<p>Wait on multiple channels, first one ready wins:</p>

<pre><code class="language-javascript">import { DeterministicScheduler, channel, select, selectCase } from 'pulselang/runtime'

const scheduler = new DeterministicScheduler()
const ch1 = channel()
const ch2 = channel()

scheduler.spawn(async () =&gt; {
  await scheduler.sleep(5)
  await ch1.send('from ch1')
})

scheduler.spawn(async () =&gt; {
  await scheduler.sleep(10)
  await ch2.send('from ch2')
})

scheduler.spawn(async () =&gt; {
  const result = await select {
    case recv ch1
    case recv ch2
  }
  print('Got:', result.value)
})

await scheduler.run()
</code></pre>

<p>Expected output:</p>
<pre><code>Got: from ch1
</code></pre>

<p>Still deterministic. If multiple channels are ready, scheduler picks based on logical time and source order. Same state = same choice.</p>

<h2>Error Handling</h2>

<p>Use try-catch blocks for error handling:</p>

<pre><code class="language-javascript">async fn riskyOperation() {
  try {
    const data = await fs.readJson('./config.json')
    return data
  } catch (error) {
    print('Error:', error.message)
    return null
  }
}
</code></pre>

<h2>Modules and Imports</h2>

<h3>Named Exports</h3>

<pre><code class="language-javascript">export fn add(a, b) {
  return a + b
}

export const PI = 3.14159
</code></pre>

<h3>Default Exports</h3>

<pre><code class="language-javascript">export default class Calculator {
  add(a, b) { return a + b }
  subtract(a, b) { return a - b }
}
</code></pre>

<h3>Importing</h3>

<pre><code class="language-javascript">import { add, PI } from './math.pulse'
import Calculator from './calculator.pulse'
import * as math from './math.pulse'
</code></pre>

<h2>Standard Library</h2>

<p>Pulse includes a standard library:</p>

<ul>
<li><strong>fs</strong>: File system operations</li>
<li><strong>json</strong>: JSON parsing and stringification</li>
<li><strong>math</strong>: Mathematical functions and constants</li>
<li><strong>cli</strong>: Command-line interface helpers</li>
<li><strong>path</strong>: Path manipulation utilities</li>
</ul>

<p>Explore the <a href="api.html">API Reference</a> for complete documentation.</p>

<h2>Next Steps</h2>

<p>Now that you understand the basics, explore:</p>

<ul>
<li><a href="api.html">API Reference</a> - Complete standard library documentation</li>
<li><a href="playground.html">Playground</a> - Example programs</li>
<li><a href="https://github.com/osvfelices/pulse">GitHub</a> - Contribute to the project</li>
</ul>

      </article>
    </main>
  </div>

  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-left">
        <a href="https://github.com/osvfelices/pulse" target="_blank">GitHub</a>
        <a href="https://www.npmjs.com/package/pulselang" target="_blank">npm</a>
        <a href="https://github.com/osvfelices/pulse/blob/main/LICENSE">License</a>
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script>
    // Add IDs to headings for direct linking
    document.addEventListener('DOMContentLoaded', function() {
      const article = document.querySelector('.article');
      const headings = article.querySelectorAll('h2, h3');

      headings.forEach((heading, index) => {
        if (!heading.id) {
          heading.id = heading.textContent.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]/g, '');
        }
      });

      // Highlight code blocks
      Prism.highlightAll();
    });
  </script>
</body>
</html>
