<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Getting Started Guide - Pulse Language</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
</head>
<body>
  <nav class="top-nav">
    <div class="top-nav-container">
      <div class="top-nav-left">
        <a href="index.html" class="top-nav-logo">
          <img src="./pulse.svg" alt="Pulse Logo" class="top-nav-logo-img">
          <span class="top-nav-logo-text">Pulse</span>
        </a>
        <div class="top-nav-links">
          <a href="index.html" class="top-nav-link">Docs</a>
          <a href="playground.html" class="top-nav-link">Playground</a>
          <a href="https://github.com/osvfelices/pulse" class="top-nav-link" target="_blank">GitHub</a>
        </div>
      </div>
      <div class="top-nav-right">
        <a href="https://www.npmjs.com/package/pulselang" class="top-nav-button" target="_blank">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download
        </a>
      </div>
    </div>
  </nav>

  <div class="docs-container">
    <aside class="sidebar-left">
      <nav class="sidebar-nav">
        <div class="nav-group">
          <div class="nav-group-title">Getting Started</div>
          <a href="index.html" class="nav-item">Overview</a>
          <a href="guide.html" class="nav-item">Installation</a>
        </div>
        <div class="nav-group">
          <div class="nav-group-title">Documentation</div>
          <a href="api.html" class="nav-item">API Reference</a>
          <a href="playground.html" class="nav-item">Playground</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <article class="article">
        <h1>Getting Started Guide</h1>

<p>Learn the fundamentals of Pulse programming in this guide.</p>

<h2>Installation</h2>

<p>Install Pulse locally in your project:</p>

<pre><code class="language-bash">npm install pulselang
</code></pre>

<p>Or clone the repository if you want to work on Pulse itself:</p>

<pre><code class="language-bash">git clone https://github.com/osvfelices/pulse.git
cd pulse
npm install
npm test  # Verify everything works
</code></pre>

<h2>Your First Program</h2>

<p>Create a file called <code>hello.pulse</code>:</p>

<pre><code class="language-javascript">fn main() {
  print('Hello, Pulse!')
}

main()
</code></pre>

<p>Compile and run it:</p>

<pre><code class="language-bash"># If you installed pulselang via npm:
node_modules/.bin/pulselang hello.pulse
node hello.mjs

# If you are inside the pulse repo:
node lib/run.js hello.pulse
node hello.mjs
</code></pre>

<p>The compiler generates <code>hello.mjs</code> — a JavaScript ES module you can run with Node, import from other JS files, or bundle with Vite/Webpack/etc.</p>

<h2>Basic Syntax</h2>

<h3>Variables and Constants</h3>

<pre><code class="language-javascript">const PI = 3.14159
let counter = 0
var oldStyle = 'avoid using var'
</code></pre>

<h3>Functions</h3>

<pre><code class="language-javascript">fn add(a, b) {
  return a + b
}

const multiply = (x, y) =&gt; x * y

async fn fetchData(url) {
  const response = await fetch(url)
  return response.json()
}
</code></pre>

<h3>Classes</h3>

<pre><code class="language-javascript">class Rectangle {
  constructor(width, height) {
    this.width = width
    this.height = height
  }

  area() {
    return this.width * this.height
  }

  static fromSquare(size) {
    return new Rectangle(size, size)
  }
}

const rect = new Rectangle(10, 20)
print(rect.area())
</code></pre>

<h2>Working with Files</h2>

<p>Pulse provides a file system API in the <code>std/fs</code> module:</p>

<pre><code class="language-javascript">import fs from 'std/fs'

async fn main() {
  const content = await fs.readText('./data.txt')
  print(content)

  await fs.writeText('./output.txt', 'Hello World')

  const data = await fs.readJson('./config.json')
  print('Version:', data.version)

  const files = await fs.readDir('./')
  for (const file of files) {
    print(file)
  }
}

await main()
</code></pre>

<h2>Reactivity</h2>

<p>Pulse includes a reactive system inspired by modern frameworks:</p>

<pre><code class="language-javascript">import { signal, effect, computed, batch } from 'std/reactive'

const [count, setCount] = signal(0)
const [name, setName] = signal('Alice')

const message = computed(() =&gt; {
  return `${name()} has ${count()} items`
})

effect(() =&gt; {
  print(message())
})

setCount(5)
setName('Bob')

batch(() =&gt; {
  setCount(10)
  setName('Charlie')
})
</code></pre>

<h2>Concurrency with Channels</h2>

<p>Channels are how tasks communicate. Forget Promises — no <code>.then()</code>, no <code>.catch()</code>. A channel is just a pipe. One task writes, another reads.</p>

<p>The important part: <code>await ch.send(value)</code> <strong>blocks your task</strong> until someone does <code>await ch.recv()</code>. This is how determinism works - the scheduler knows exactly when each task is waiting and when to wake it up.</p>

<p>Example:</p>

<pre><code class="language-javascript">import { DeterministicScheduler, channel } from '../../lib/runtime/index.js'

const scheduler = new DeterministicScheduler()
const ch = channel()  // Unbuffered channel (capacity 0)

async fn producer() {
  for (let i = 0; i &lt; 5; i++) {
    await ch.send(i)
    print('Sent:', i)
  }
  ch.close()  // Signal that no more values are coming
}

async fn consumer() {
  for await (const value of ch) {
    print('Received:', value)
  }
  print('Channel closed')
}

scheduler.spawn(producer)
scheduler.spawn(consumer)
await scheduler.run()
</code></pre>

<p>What happens:</p>
<ul>
<li>Producer sends 0, blocks</li>
<li>Consumer receives 0, prints it, goes back to waiting</li>
<li>Producer wakes up, sends 1, blocks again</li>
<li>This ping-pongs until producer closes the channel</li>
<li>Consumer's <code>for await</code> sees the close and exits</li>
</ul>

<p>Run this 100 times, you get the exact same output every time. That's the point.</p>

<h3>Buffered Channels</h3>

<p>Unbuffered = handshake (both sides wait). Buffered = mailbox (you can drop stuff off and leave).</p>

<pre><code class="language-javascript">const buffered = channel(10)  // holds 10 items

// First 10 sends don't block
for (let i = 0; i &lt; 10; i++) {
  await buffered.send(i)
}

// 11th send blocks until someone reads
await buffered.send(11)
</code></pre>

<p>Useful when producer and consumer run at different speeds. Producer fills buffer, consumer drains it whenever.</p>

<h3>Select Operations</h3>

<p>Wait on multiple channels, first one ready wins:</p>

<pre><code class="language-javascript">import { select, selectCase } from '../../lib/runtime/index.js'

const ch1 = channel()
const ch2 = channel()

const result = await select([
  selectCase({ channel: ch1, op: 'recv' }),
  selectCase({ channel: ch2, op: 'recv' })
])

print('Got from', result.caseIndex === 0 ? 'ch1' : 'ch2')
print('Value:', result.value)
</code></pre>

<p>You can mix sends and receives:</p>

<pre><code class="language-javascript">await select([
  selectCase({ channel: ch1, op: 'send', value: 42 }),
  selectCase({ channel: ch2, op: 'recv' })
])
</code></pre>

<p>Still deterministic — if multiple channels are ready, scheduler picks based on logical time. Same state = same choice.</p>

<h2>Error Handling</h2>

<p>Use try-catch blocks for error handling:</p>

<pre><code class="language-javascript">async fn riskyOperation() {
  try {
    const data = await fs.readJson('./config.json')
    return data
  } catch (error) {
    print('Error:', error.message)
    return null
  }
}
</code></pre>

<h2>Modules and Imports</h2>

<h3>Named Exports</h3>

<pre><code class="language-javascript">export fn add(a, b) {
  return a + b
}

export const PI = 3.14159
</code></pre>

<h3>Default Exports</h3>

<pre><code class="language-javascript">export default class Calculator {
  add(a, b) { return a + b }
  subtract(a, b) { return a - b }
}
</code></pre>

<h3>Importing</h3>

<pre><code class="language-javascript">import { add, PI } from './math.pulse'
import Calculator from './calculator.pulse'
import * as math from './math.pulse'
</code></pre>

<h2>Standard Library</h2>

<p>Pulse includes a rich standard library:</p>

<ul>
<li><strong>fs</strong>: File system operations</li>
<li><strong>json</strong>: JSON parsing and stringification</li>
<li><strong>math</strong>: Mathematical functions and constants</li>
<li><strong>async</strong>: Advanced async utilities</li>
<li><strong>cli</strong>: Command-line interface helpers</li>
<li><strong>path</strong>: Path manipulation utilities</li>
</ul>

<p>Explore the <a href="api.html">API Reference</a> for complete documentation.</p>

<h2>Next Steps</h2>

<p>Now that you understand the basics, explore:</p>

<ul>
<li><a href="api.html">API Reference</a> - Complete standard library documentation</li>
<li><a href="playground.html">Playground</a> - Try Pulse in your browser</li>
<li><a href="https://github.com/osvfelices/pulse">GitHub</a> - Contribute to the project</li>
</ul>

      </article>
    </main>
  </div>

  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-left">
        <a href="https://github.com/osvfelices/pulse" target="_blank">GitHub</a>
        <a href="https://www.npmjs.com/package/pulselang" target="_blank">npm</a>
        <a href="https://github.com/osvfelices/pulse/blob/main/LICENSE">License</a>
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script>
    // Add IDs to headings for direct linking
    document.addEventListener('DOMContentLoaded', function() {
      const article = document.querySelector('.article');
      const headings = article.querySelectorAll('h2, h3');

      headings.forEach((heading, index) => {
        if (!heading.id) {
          heading.id = heading.textContent.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]/g, '');
        }
      });

      // Highlight code blocks
      Prism.highlightAll();
    });
  </script>
</body>
</html>
