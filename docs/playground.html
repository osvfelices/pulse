<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playground - Pulse Language</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
</head>
<body>
  <nav class="top-nav">
    <div class="top-nav-container">
      <div class="top-nav-left">
        <a href="index.html" class="top-nav-logo">
          <img src="./pulse.svg" alt="Pulse Logo" class="top-nav-logo-img">
          <span class="top-nav-logo-text">Pulse</span>
        </a>
        <div class="top-nav-links">
          <a href="index.html" class="top-nav-link">Docs</a>
          <a href="playground.html" class="top-nav-link">Playground</a>
          <a href="https://github.com/osvfelices/pulse" class="top-nav-link" target="_blank">GitHub</a>
        </div>
      </div>
      <div class="top-nav-right">
        <a href="https://www.npmjs.com/package/pulselang" class="top-nav-button" target="_blank">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download
        </a>
      </div>
    </div>
  </nav>

  <div class="docs-container">
    <aside class="sidebar-left">
      <nav class="sidebar-nav">
        <div class="nav-group">
          <div class="nav-group-title">Getting Started</div>
          <a href="index.html" class="nav-item">Overview</a>
          <a href="guide.html" class="nav-item">Installation</a>
        </div>
        <div class="nav-group">
          <div class="nav-group-title">Documentation</div>
          <a href="api.html" class="nav-item">API Reference</a>
          <a href="playground.html" class="nav-item">Playground</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <article class="article">
        <h1>Playground</h1>

<h2>Interactive Example</h2>

<p>Run this code to see Pulse in action:</p>

<pre><code class="language-javascript">import { signal, effect } from 'pulselang/runtime'

const [count, setCount] = signal(0)

effect(() =&gt; {
  print('count is', count())
})

setCount(1)
setCount(2)
setCount(3)
</code></pre>

<p>Click Run. Expected output:</p>
<pre><code>count is 0
count is 1
count is 2
count is 3
</code></pre>

<h2>Example Programs</h2>

<p>Try these examples locally:</p>

<h3>Channels</h3>

<pre><code class="language-javascript">import { DeterministicScheduler, channel } from 'pulselang/runtime'

const scheduler = new DeterministicScheduler()
const ch = channel()

scheduler.spawn(async () =&gt; {
  for (let i = 1; i &lt;= 3; i++) {
    await ch.send(i)
  }
  ch.close()
})

scheduler.spawn(async () =&gt; {
  for await (const x of ch) {
    print('received', x)
  }
})

await scheduler.run()
</code></pre>

<p>Expected output:</p>
<pre><code>received 1
received 2
received 3
</code></pre>

<h3>Select</h3>

<pre><code class="language-javascript">import { DeterministicScheduler, channel, select, selectCase } from 'pulselang/runtime'

const scheduler = new DeterministicScheduler()
const fast = channel()
const slow = channel()

scheduler.spawn(async () =&gt; {
  await scheduler.sleep(5)
  await fast.send('fast')
})

scheduler.spawn(async () =&gt; {
  await scheduler.sleep(10)
  await slow.send('slow')
})

scheduler.spawn(async () =&gt; {
  const result = await select {
    case recv fast
    case recv slow
  }
  print('got:', result.value)
})

await scheduler.run()
</code></pre>

<p>Expected output:</p>
<pre><code>got: fast
</code></pre>

<h3>File System Operations</h3>

<pre><code class="language-javascript">import fs from 'std/fs'
import path from 'std/path'

async fn listFiles(dir) {
  const files = await fs.readDir(dir)

  for (const file of files) {
    const fullPath = path.join(dir, file)
    const stats = await fs.stat(fullPath)

    if (stats.isFile) {
      print(`File: ${file} (${stats.size} bytes)`)
    } else {
      print(`Dir: ${file}`)
    }
  }
}

await listFiles('./')
</code></pre>

<h3>Building a CLI Tool</h3>

<pre><code class="language-javascript">import cli from 'std/cli'
import fs from 'std/fs'

async fn main() {
  const args = cli.parseArgs(process.argv, {
    flags: ['verbose', 'help'],
    options: ['output']
  })

  if (args.help) {
    print('Usage: pulse run tool.pulse [options]')
    print('Options:')
    print('  --verbose    Enable verbose output')
    print('  --output     Output file path')
    print('  --help       Show this help')
    return
  }

  const spinner = cli.spinner('Processing...')
  spinner.start()

  await sleep(2000)

  spinner.stop()
  print(cli.colors.green('Done!'))
}

await main()
</code></pre>

<h2>Try It Locally</h2>

<p>To run these examples:</p>

<strong>Using CLI commands (after <code>npm install pulselang</code>):</strong>
<pre><code class="language-bash">pulse test.pulse
# or: pulselang test.pulse
</code></pre>

<strong>Or run directly:</strong>
<pre><code class="language-bash">node node_modules/pulselang/lib/run.js test.pulse
</code></pre>

<strong>Or compile first:</strong>
<pre><code class="language-bash">node node_modules/pulselang/tools/build/build.mjs --src . --out ./dist
node dist/test.mjs
</code></pre>

<p>If working from the repository:</p>

<pre><code class="language-bash">pulse test.pulse
# or: node lib/run.js test.pulse
# or: node tools/build/build.mjs --src . --out ./dist
</code></pre>

<h2>Next Steps</h2>

<ul>
<li><a href="api.html">API Reference</a> - Complete documentation</li>
<li><a href="guide.html">Getting Started Guide</a> - Learn more</li>
<li><a href="https://github.com/osvfelices/pulse">GitHub</a> - Source code and examples</li>
</ul>

      </article>
    </main>
  </div>

  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-left">
        <a href="https://github.com/osvfelices/pulse" target="_blank">GitHub</a>
        <a href="https://www.npmjs.com/package/pulselang" target="_blank">npm</a>
        <a href="https://github.com/osvfelices/pulse/blob/main/LICENSE">License</a>
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script>
    // Add IDs to headings for direct linking
    document.addEventListener('DOMContentLoaded', function() {
      const article = document.querySelector('.article');
      const headings = article.querySelectorAll('h2, h3');

      headings.forEach((heading, index) => {
        if (!heading.id) {
          heading.id = heading.textContent.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]/g, '');
        }
      });

      // Highlight code blocks
      Prism.highlightAll();
    });
  </script>
</body>
</html>
